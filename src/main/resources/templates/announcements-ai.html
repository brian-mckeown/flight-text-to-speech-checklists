<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Announcements AI</title>

    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <!-- Include FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Google Fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Moment.js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <!-- Optional AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <!-- Custom files-->
    <link th:href="@{/announcement-styles.css}" rel="stylesheet">
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-RKZ370CHNJ');
    </script>
</head>

<body ng-app="announcementsApp" ng-controller="announcementsController">
    <div class="container mt-3">
        <!-- Heading -->
        <div class="mt-4 bg-custom-title p-5 text-white rounded d-flex justify-content-between align-items-center" style="background-color: #007bff;">
            <div>
              <h1 style="font-family: 'Roboto', sans-serif; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);"><i class="fa-solid fa-plane"></i> Announcements AI</h1>
              <p class="text-dark" style="font-size: 1.25rem;">By FlightDash.io (Open Beta)</p>
            </div>
            <img src="./assets/fa-icon.webp" class="img-fluid" style="border-radius: 50%; width: 100px; height: 100px; object-fit: cover;" alt="Flight Attendant">
          </div>          

        <!-- Steps -->
        <!-- Agreement -->
        <div class="container mt-4">
            <div id="AgreementBar" class="alert alert-primary small-alert" role="alert" data-bs-toggle="collapse" href="#AgreementSection">
                1. <h6 class="mb-3 d-inline">
                    <i class="fas fa-caret-right" aria-hidden="true" id="AgreementCaret"></i> Agreement
                </h6>
            </div>
            <div class="collapse show" id="AgreementSection">
                <div class="container mt-4">
                    <p>Before using Announcements AI (Beta), you must read and agree to the <a href="/openai-usage-policy"
                            target="_blank">OpenAI Usage Policy</a>.</p>
                    <ul>
                        <li>I have read and agree to the OpenAI Usage Policy.</li>
                        <li>I acknowledge and agree that I am solely responsible for all costs incurred through the use of OpenAI and any associated services, regardless of the accuracy of cost estimations provided by FlightDash.io, the performance or failure of any tools developed by FlightDash.io, issues arising from the use of third-party services integrated with or recommended by FlightDash.io, or any other circumstances that may occur. I further understand that this responsibility extends to all direct or indirect expenses, fees, or charges that may arise in the course of using these tools and services. Consequently, I hereby release FlightDash.io, its developers, affiliates, partners, and any associated parties from any claims, liabilities, damages, or losses that may result from such costs or from the performance or failure of the tools and services mentioned.</li>
                        <li>I understand that this is an Open Beta feature and may not always work as expected.</li>
                    </ul>

                    <form>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="agreementCheckbox" ng-model="agreementCheckbox" ng-disabled="agreementCheckbox" required>
                            <label class="form-check-label" for="agreementCheckbox">
                              <strong>I agree to all statements above</strong> <span style="color: red;">*</span>
                            </label>
                          </div>                          
                    </form>
                </div> 
            </div>
        </div>
        <!-- Keys -->
        <div class="container mt-4">
            <div id="KeysBar" class="alert alert-secondary small-alert" role="alert" ng-click="toggleCollapse($event)">
                2. <h6 class="mb-3 d-inline">
                    <i class="fas fa-caret-right" aria-hidden="true" id="KeysCaret"></i> Keys
                </h6>
            </div>
            <div class="collapse" id="KeysSection">
                <div class="container mt-4">
                    <div class="mb-3">
                        <label for="importFile" class="form-label">Import Key File:</label>
                        <input type="file" id="importFile" class="form-control"
                            onchange="angular.element(this).scope().importKeys(this)">
                    </div>
                    <div class="mb-3">
                        <label for="simbriefPilotId" class="form-label">SimBrief Pilot ID</label>
                        <div class="input-group">
                            <input type="{{simbriefIdVisible ? 'text' : 'password'}}" class="form-control"
                                id="simbriefPilotId" ng-model="simbriefPilotId">
                            <button class="btn btn-outline-secondary" type="button"
                                ng-click="simbriefIdVisible = !simbriefIdVisible">
                                <i class="bi" ng-class="simbriefIdVisible ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
                            </button>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="openAiApiKey" class="form-label">OpenAI API Key <span style="color:red">*</span></label>
                        <div class="input-group">
                            <input type="{{openAiKeyVisible ? 'text' : 'password'}}" class="form-control"
                                id="openAiApiKey" ng-model="openAiApiKey" placeholder="Enter your API Key" required>
                            <button class="btn btn-outline-secondary" type="button"
                                ng-click="openAiKeyVisible = !openAiKeyVisible">
                                <i class="bi" ng-class="openAiKeyVisible ? 'bi-eye-slash-fill' : 'bi-eye-fill'"></i>
                            </button>
                        </div>
                    </div>
                    <div class="mb-3">
                        <button class="btn btn-success" required>Validate OpenAI Key</button>
                        <hr>
                        <button class="btn btn-primary" ng-click="saveKeys()">Save Key File</button>
                    </div>
                </div> 
            </div>
        </div>
         <!-- Flight Data -->
         <div class="container mt-4">
            <div class="alert alert-secondary small-alert" role="alert" data-bs-toggle="collapse" href="#FlightDataSection"> 
                3. <h6 class="mb-3 d-inline">
                    <i class="fas fa-caret-right" aria-hidden="true" id="FlightDataCaret"></i> Flight Data
                </h6>
            </div>
            <div class="collapse" id="FlightDataSection">
                <div class="container mt-4">
                    <form>
                        <!-- Row 0 -->
                        <div class="row mb-4">
                            <div class="col-md-4">
                                <label for="simbriefButton" class="form-label">Simbrief</label>
                                <button id="simbriefButton" class="btn btn-primary">Import from Simbrief</button>
                            </div>
                            <div class="col-md-4">
                                <label for="airlineInput" class="form-label">Airline</label>
                                <input type="text" class="form-control" id="airlineInput" placeholder="e.g. American Airlines" ng-model="airline">
                            </div>
                            <div class="col-md-4">
                                <img ng-src="{{getImageSrc(callSign)}}" img-fallback="./assets/logos/default.png" alt="Airline logo" style="height: 75px; object-fit: contain;">
                            </div>
                        </div>
                        <!-- Row 1 -->
                        <div class="row mb-3">
                            <!-- Aircraft Input -->
                            <div class="col-md-3">
                                <label for="aircraftInput" class="form-label">Aircraft</label>
                                <input type="text" class="form-control" id="aircraftInput"
                                    placeholder="Enter Aircraft Name" ng-model="aircraftName">
                            </div>
                            <!-- Call Sign Input -->
                            <div class="col-md-3">
                                <label for="callSignInput" class="form-label">Call Sign</label>
                                <input type="text" class="form-control" id="callSignInput"
                                    placeholder="Enter Call Sign" ng-model="callSign">
                            </div>
                            <!-- Departure ICAO Input -->
                            <div class="col-md-3">
                                <label for="departureICAOInput" class="form-label">Departure ICAO</label>
                                <input type="text" class="form-control" id="departureICAOInput" maxlength="4"
                                    oninput="this.value = this.value.toUpperCase()"
                                    placeholder="Enter Departure ICAO" ng-model="departureIcao">
                            </div>
                            <!-- Arrival ICAO Input -->
                            <div class="col-md-3">
                                <label for="arrivalICAOInput" class="form-label">Arrival ICAO</label>
                                <input type="text" class="form-control" id="arrivalICAOInput" maxlength="4"
                                    oninput="this.value = this.value.toUpperCase()"
                                    placeholder="Enter Arrival ICAO" ng-model="arrivalIcao">
                            </div>
                        </div>
                        <!-- Row 2 -->
                        <div class="row mb-3">
                            <!-- Scheduled Boarding Input -->
                            <div class="col-md-6">
                                <label for="boardingDateTime" class="form-label">Scheduled Boarding</label>
                                <input type="datetime-local" class="form-control" id="boardingDateTime" ng-model="scheduledBoardingDateTime" ng-change="convertToUTC(scheduledBoardingDateTime, 'scheduled_boarding')">
                                <small class="form-text text-muted">{{scheduledBoardingUtcTimeDisplay}}</small>
                            </div>
                            <!-- Scheduled Departure Input -->
                            <div class="col-md-6">
                                <label for="departureDateTimeInput" class="form-label">Scheduled Departure</label>
                                <input type="datetime-local" class="form-control" id="departureDateTimeInput" ng-model="scheduledDepartureDateTime" ng-change="convertToUTC(scheduledDepartureDateTime, 'scheduled_departure')">
                                <small class="form-text text-muted">{{scheduledDepartureUtcTimeDisplay}}</small>
                            </div>
                        </div>
                        <!-- Row 3 -->
                        <div class="row mb-3">
                            <!-- Estimated Arrival Input -->
                            <div class="col-md-6">
                                <label for="arrivalDateTimeInput" class="form-label">Estimated Arrival</label>
                                <input type="datetime-local" class="form-control" id="arrivalDateTimeInput" ng-model="estimateArrivalDateTime">
                            </div>
                            <!-- Estimated Gate Arrival Input -->
                            <div class="col-md-6">
                                <label for="gateArrivalDateTimeInput" class="form-label">Estimated Gate
                                    Arrival</label>
                                <input type="datetime-local" class="form-control" id="gateArrivalDateTimeInput" ng-model="estimateGateArrivalDateTime">
                            </div>
                        </div>
                        <!-- Row 4 -->
                        <div class="row mb-3">
                            <!-- Passengers Input -->
                            <div class="col-md-4">
                                <label for="numberOfPassengers" class="form-label">Passengers</label>
                                <input type="number" class="form-control" id="numberOfPassengers"
                                    ng-model="numberOfPassengers">
                            </div>
                            <!-- Airline -->
                            <div class="col-md-4">
                                <label for="airlineInput" class="form-label">Airline</label>
                                <input type="text" class="form-control" id="airlienInput" placeholder="e.g. American Airlines" ng-model="airline">
                            </div>
                            <!-- Generate Flight Crew -->
                            <div class="col-md-4">
                                <label for="generateFlightCrew" class="form-label">Generate Flight Crew</label>
                                <input type="button" class="btn btn-success" id="generateFlightCrew"
                                    ng-click="generateFlightCrew()" value="Generate Flight Crew">
                            </div>
                        </div>
                        <div>
                            <h4>Flight Crew</h4>
                            <p>Sample the sounds of the different AI voices <a href="https://platform.openai.com/docs/guides/text-to-speech" target="_blank">here</a></p>
                            <table class="table table-striped table-sm">
                                <thead>
                                    <tr>
                                        <th scope="col">Position</th>
                                        <th scope="col">First Name</th>
                                        <th scope="col">Last Name</th>
                                        <th scope="col">OpenAI Voice</th>
                                        <th scope="col">Personality</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="crewMember in flightCrewArray">
                                        <td>{{crewMember.position}}</td>
                                        <td><input type="text" class="form-control form-control-sm" ng-model="crewMember.firstName"></td>
                                        <td><input type="text" class="form-control form-control-sm" ng-model="crewMember.lastName"></td>
                                        <td>
                                            <div ng-show="['Captain', 'Lead Flight Attendant', 'Gate Attendant'].includes(crewMember.position)">
                                                <select class="form-select form-select-sm" ng-model="crewMember.voice">
                                                    <option value="alloy">alloy</option>
                                                    <option value="echo">echo</option>
                                                    <option value="fable">fable</option>
                                                    <option value="onyx">onyx</option>
                                                    <option value="nova">nova</option>
                                                    <option value="shimmer">shimmer</option>
                                                </select>
                                            </div>
                                            <div ng-hide="['Captain', 'Lead Flight Attendant', 'Gate Attendant'].includes(crewMember.position)">
                                                N/A
                                            </div>
                                        </td>
                                        <td>
                                            <div ng-show="['Captain', 'Lead Flight Attendant', 'Gate Attendant'].includes(crewMember.position)">
                                                <select class="form-select form-select-sm" ng-model="crewMember.personality">
                                                    <option value="Professional">Professional</option>
                                                    <option value="Comedian">Comedian</option>
                                                    <option value="Introvert">Introvert</option>
                                                </select>
                                            </div>
                                            <div ng-hide="['Captain', 'Lead Flight Attendant', 'Gate Attendant'].includes(crewMember.position)">
                                                N/A
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </form>
                </div> 
            </div>
        </div>
    </div>

    </div>
    <!-- custom JS-->
    <script th:src="@{/airlines.js}"></script>
    <script th:src="@{/announcements-script.js}"></script>
</body>
</html>